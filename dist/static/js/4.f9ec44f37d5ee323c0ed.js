webpackJsonp([4],{"1KWZ":function(t,e){},AtFq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("mtWM"),s=n.n(a),i={data:function(){return{artList:[],comList:[],comment_name:"",comment_content:"",show:"false",msg:"感谢您的评论",suc:"info",preList:[],nextList:[],pre:"",next:"",art_id:""}},components:{"v-header":n("nW75").default},mounted:function(){this.$nextTick(function(){this.getArt(),this.getComment()})},filters:{time:function(t){var e=new Date(1e3*parseInt(t));return e.getFullYear()+"-"+(e.getMonth()+1>9?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+(e.getDate()>9?e.getDate():"0"+e.getDate())}},methods:{getId:function(){this.$route.query.id?this.art_id=this.$route.query.id:this.art_id=1},getArt:function(){var t=this;this.getId(),s.a.get("/art/"+this.art_id).then(function(e){t.artList=e.data.data[0][0],e.data.data[1]?(t.preList=e.data.data[1],t.pre=t.preList.art_title):(t.preList="",t.pre="没有上一篇了"),e.data.data[2]?(t.nextList=e.data.data[2],t.next=t.nextList.art_title):(t.nextList="",t.next="没有下一篇了")})},getComment:function(){var t=this;this.getId(),s.a.get("/comments/"+this.art_id).then(function(e){t.comList=e.data.data})},postComment:function(){var t=this;this.comment_name&&this.comment_content?s()({url:"/newcomment",method:"post",data:{comment_name:this.comment_name,comment_content:this.comment_content,article_id:this.art_id},transformRequest:[function(t){var e="";for(var n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.msg="评论成功",t.suc="success",t.comment_name="",t.comment_content="",t.getComment()}).catch(function(t){console.log(t)}):(this.msg="评论内容及昵称不能为空",this.suc="error")},newArt:function(){this.getArt(),this.getComment(),this.show="false",this.msg="感谢您的评论",this.suc="info"}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"article"}},[n("v-header"),t._v(" "),n("div",{staticClass:"art"},[n("div",{staticClass:"art-head"},[n("div",{staticClass:"art-title"},[t._v(t._s(t.artList.art_title))]),t._v(" "),n("div",{staticClass:"art-des"},[t._v(t._s(t.artList.art_description))]),t._v(" "),n("div",{staticClass:"art-foot"},[n("div",{staticClass:"art-author"},[n("i",{staticClass:"el-icon-zh-gerenzhongxin"},[t._v(" "+t._s(t.artList.art_editor))])]),t._v(" "),n("div",{staticClass:"art-tag"},[n("i",{staticClass:"el-icon-zh-biaoqian"},[t._v(" "+t._s(t.artList.art_tag))])]),t._v(" "),n("div",{staticClass:"art-date"},[n("i",{staticClass:"el-icon-zh-shijian"},[t._v(" "+t._s(t._f("time")(t.artList.art_time)))])]),t._v(" "),n("div",{staticClass:"art-view"},[n("i",{staticClass:"el-icon-zh-eye"},[t._v(" "+t._s(t.artList.art_view))])])])]),t._v(" "),n("div",{staticClass:"art-content",domProps:{innerHTML:t._s(t.artList.art_content)}})]),t._v(" "),n("div",{staticClass:"art-pre",on:{click:t.newArt}},[t._v("\n\t\t\t上一篇："),n("router-link",{attrs:{to:{path:"/article",query:{id:t.preList.art_id}}}},[t._v("\n\t\t\t"+t._s(this.pre))])],1),t._v(" "),n("div",{staticClass:"art-next",on:{click:t.newArt}},[t._v("\n\t\t\t下一篇："),n("router-link",{attrs:{to:{path:"/article",query:{id:t.nextList.art_id}}}},[t._v("\n\t\t\t"+t._s(this.next))])],1),t._v(" "),n("div",{staticClass:"new-art-comment"},[n("div",{staticClass:"new-comment-name"},[n("el-input",{attrs:{placeholder:"请输入您的昵称",clearable:""},model:{value:t.comment_name,callback:function(e){t.comment_name=e},expression:"comment_name"}})],1),t._v(" "),n("div",{staticClass:"new-comment-body"},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入评论内容"},model:{value:t.comment_content,callback:function(e){t.comment_content=e},expression:"comment_content"}})],1),t._v(" "),n("div",{staticClass:"new-comment-alert"},[n("el-alert",{attrs:{title:this.msg,type:this.suc,"show-icon":"",center:"",closable:!1}})],1),t._v(" "),n("div",{staticClass:"new-comment-submit",on:{click:t.postComment}},[n("el-button",[t._v("提交评论")])],1)]),t._v(" "),t._l(t.comList,function(e){return n("div",{staticClass:"art-comment"},[n("div",{staticClass:"new-comment-name"},[n("p",{model:{value:t.comment_name,callback:function(e){t.comment_name=e},expression:"comment_name"}},[t._v(t._s(e.comment_name))]),n("p",[t._v(t._s(e.comment_time))])]),t._v(" "),n("div",{staticClass:"new-comment-body"},[n("p",[t._v(t._s(e.comment_content))])])])})],2)},staticRenderFns:[]};var c=n("VU/8")(i,o,!1,function(t){n("1KWZ")},null,null);e.default=c.exports}});